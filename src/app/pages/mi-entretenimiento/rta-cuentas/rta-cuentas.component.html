<p-toast></p-toast>
<h1 class="text-center">MI ENTRETENIMIENTO - RESPUESTA</h1>

<div class="grid">
  <div class="col-12 md:col-12">
    <div class="card">
      <h5>Seleccione los archivos - Respuestas </h5>
      <p-fileUpload name="myfile[]" customUpload="true" (uploadHandler)="onUpload($event)" multiple="multiple" accept=".xlsx" maxFileSize="1000000" chooseLabel="Agregar" uploadLabel="Cargar" cancelLabel="Cancelar">
      </p-fileUpload>
      <div class="mt-4" *ngIf="showProgressBar">
        <h5>Barra de progreso</h5>
        <p-progressBar [value]="valueProgressBar"></p-progressBar>
      </div>
    </div>

  </div>

  <div class="col-12">
    <div class="card">
      <h5>Respuesta cuentas</h5>
      <p-table [loading]="spinData" #tableData [value]="listRtas" dataKey="code" [rows]="10" [paginator]="true" responsiveLayout="scroll" [globalFilterFields]="['id','cuenta_afectada','password','resuelto','fecha_respuesta','respuesta']" [rowsPerPageOptions]="[5,10,20,50]">
        <ng-template pTemplate="caption">
          <div class="flex justify-content-between flex-column sm:flex-row">
            <button pButton label="Borrar filtros" class="p-button-outlined mb-2" icon="pi pi-filter-slash" (click)="clear(tableData)"></button>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="id">ID
              <p-sortIcon field="id"></p-sortIcon>
            </th>
            <th pSortableColumn="cuenta_afectada">Cuenta afectada
              <p-sortIcon field="cuenta_afectada"></p-sortIcon>
            </th>
            <th pSortableColumn="password">Contraseña
              <p-sortIcon field="password"></p-sortIcon>
            </th>
            <th pSortableColumn="resuelto">Resuelto
              <p-sortIcon field="resuelto"></p-sortIcon>
            </th>
            <th pSortableColumn="fecha_respuesta">Fecha respuesta
              <p-sortIcon field="fecha_respuesta"></p-sortIcon>
            </th>
            <th pSortableColumn="respuesta">Respuesta
              <p-sortIcon field="respuesta"></p-sortIcon>
            </th>

          </tr>
          <tr>
            <th>
              <p-columnFilter type="text" field="id"></p-columnFilter>
            </th>
            <th>
              <p-columnFilter type="text" field="cuenta_afectada"></p-columnFilter>
            </th>
            <th>
              <p-columnFilter type="text" field="password"></p-columnFilter>
            </th>
            <th>
              <p-columnFilter type="text" field="resuelto"></p-columnFilter>
            </th>
            <th>
              <div class="flex justify-content-between flex-column sm:flex-row">
                <p-calendar selectionMode="range" [showIcon]="true" [readonlyInput]="true" inputId="range" [touchUI]="true" placeholder="Rango de fechas" [(ngModel)]="rangoFechasData"></p-calendar>
                <button type="button" pButton pRipple icon="pi pi-search" class="ml-2" (click)="getDataFecha()"></button>
              </div>
            </th>
            <th>
              <p-columnFilter type="text" field="respuesta"></p-columnFilter>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data>
          <tr>
            <td style="min-width: 12rem;">
                {{data.id }}
            </td>
            <td style="min-width: 12rem;">
                {{data.cuenta_afectada }}
            </td>
            <td style="min-width: 12rem;">
                {{data.password }}
            </td>
            <td style="min-width: 12rem;">
                {{data.resuelto }}
            </td>
            <td style="min-width: 12rem;" *ngIf="data.fecha_respuesta!=null">
                {{data.fecha_respuesta | date:'dd-MM-yyyy'}}
            </td>
            <td style="min-width: 12rem;" *ngIf="data.fecha_respuesta==null">
                No registra
            </td>
            <td style="min-width: 12rem;">
              {{data.respuesta}}
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="8">Sin registros</td>
          </tr>
        </ng-template>
        <ng-template pTemplate="loadingbody">
          <tr>
            <td colspan="8">Cargando información, por favor espere</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>


</div>
